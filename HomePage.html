<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Homepage</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              // Using a common system font, not 'Inter' as it's not loaded easily in cdn mode
              sans: ["Arial", "sans-serif"],
            },
          },
        },
      };
    </script>
    <style>
      /* ADDED: Smooth scroll behavior */
      html {
        scroll-behavior: smooth;
      }

      * {
        margin: 0;
        padding: 0;
        text-decoration: none;
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        transition: background-color 0.3s, color 0.3s;
        /* Default Light Mode Variables */
        --bg-color: #f9fafc;
        --text-color: #222;
        --card-bg-color: #fff;
        --shadow-color: rgba(0, 0, 0, 0.1);
        --secondary-text: #555;
        --navbar-bg: crimson;
        /* NEW CALENDAR VARIABLES - Mapped to existing/new names */
        --calendar-header: crimson;
        --calendar-day-bg: #fff;
        --calendar-border: #ddd;
        --calendar-dayname-bg: #f3f3f3;
      }

      /* --- Dark Mode Styles using CSS Checkbox Hack --- */
      #theme-toggle:checked ~ .page-wrapper {
        --bg-color: #121212;
        --text-color: #fff;
        --card-bg-color: #1a1a1a;
        --shadow-color: rgba(255, 255, 255, 0.1);
        --secondary-text: #ccc;
        --navbar-bg: #444;
        /* NEW CALENDAR DARK MODE MAPPING */
        --calendar-header: #c41e3a;
        --calendar-day-bg: #2a2a2a;
        --calendar-border: #444;
        --calendar-dayname-bg: #333;
      }

      /* New main wrapper to apply styles to all content */
      .page-wrapper {
        background-color: var(--bg-color);
        color: var(--text-color);
        min-height: 100vh;
        padding-bottom: 20px;
      }

      /* --- Navbar Styles --- */
      .navbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 20px;
        background: var(--navbar-bg);
        color: white;
        font-family: Calibri, sans-serif;
        position: sticky; /* To keep navbar visible during scroll */
        top: 0;
        z-index: 10;
      }

      .navdiv {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
      }

      .logo img {
        height: 65px;
        width: auto;
      }

      li {
        list-style: none;
        display: inline-block;
        margin-right: 25px;
      }

      li a,
      .mode-btn {
        color: white;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
      }

      .mode-btn {
        background-color: crimson;
        padding: 8px 16px;
        border-radius: 5px;
        border: none;
        transition: background-color 0.3s ease;
      }

      .mode-btn:hover {
        background-color: #c41e3a;
      }

      /* Hamburger (hidden checkbox + label icon) */
      #menu-toggle,
      #theme-toggle {
        display: none;
      }

      .menu-icon {
        display: none;
        font-size: 28px;
        color: white;
        cursor: pointer;
      }

      /* 📱 Responsive */
      @media (max-width: 768px) {
        ul {
          display: none;
          flex-direction: column;
          background: crimson;
          position: absolute;
          top: 70px;
          right: 0;
          width: 200px;
          padding: 20px;
        }

        /* Show menu when checkbox is checked */
        #menu-toggle:checked ~ ul {
          display: flex;
        }

        .menu-icon {
          display: block; /* show hamburger */
        }
      }

      /* --- MAIN SLIDER STYLES (Existing) --- */
      .banner_section {
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        position: relative;
        margin-top: 40px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
      }

      .slider {
        height: 50vh;
        overflow: hidden;
        width: 100%;
        position: relative;
      }

      .slides {
        display: flex;
        height: 100%;
        transition: transform 1.4s cubic-bezier(0.77, 0, 0.175, 1);
        will-change: transform;
      }

      .slide {
        min-width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .slide img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .nav-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: rgba(0, 0, 0, 0.4);
        border: none;
        font-size: 2rem;
        padding: 10px 20px;
        cursor: pointer;
        color: white;
        z-index: 100;
        transition: background-color 0.3s ease;
      }

      .nav-btn:hover {
        background-color: rgba(0, 0, 0, 0.6);
      }

      #prevBtn {
        left: 10px;
      }
      #nextBtn {
        right: 10px;
      }

      .dots {
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
      }

      .dot {
        height: 12px;
        width: 12px;
        background-color: white;
        border-radius: 50%;
        opacity: 0.5;
        cursor: pointer;
        transition: opacity 0.3s ease;
      }

      .dot:hover {
        opacity: 0.8;
      }

      .active-dot {
        opacity: 1;
      }

      /* --- Tailwind Overrides/Integration --- */

      /* Apply background color variable to the main filter/category sections for dark mode integration */
      .top-categories-wrapper {
        background-color: var(--bg-color); /* Main body BG, for wrapper */
        color: var(--text-color);
      }

      /* Style for the Tailwind categories section to inherit/adapt to variables */
      .top-categories {
        background-color: var(
          --card-bg-color
        ); /* Card BG for the inner container */
        box-shadow: 0 4px 15px var(--shadow-color); /* Shadow variable */
      }

      .top-categories h2 {
        color: var(--text-color); /* Title text color */
      }

      /* Custom CSS for the absolute positioned heart icon */
      .fav-icon {
        position: absolute;
        top: 0.5rem; /* Equivalent to p-2 or 8px */
        right: 0.5rem; /* Equivalent to p-2 or 8px */
        font-size: 1.75rem; /* 28px */
        color: #ffffff;
        cursor: pointer;
        transition: color 0.3s, transform 0.1s;
        z-index: 10;
        text-shadow: 0 0 5px rgba(0, 0, 0, 0.5); /* Adds contrast */
        line-height: 1; /* Fixes vertical alignment */
      }
      .fav-icon:hover {
        transform: scale(1.1);
      }
      .fav-icon.active {
        color: #ef4444; /* Tailwind red-500, but using the hex for consistency */
      }

      /* Make the filter section adapt to dark mode variables */
      .filter-section-tailwind {
        background-color: var(--card-bg-color);
        box-shadow: 0 4px 15px var(--shadow-color);
      }

      .filter-section-tailwind label {
        color: var(--text-color);
      }

      .filter-section-tailwind select {
        background-color: var(--bg-color);
        color: var(--text-color);
        border-color: var(
          --calendar-border
        ); /* Using a softer border variable */
      }

      /* ===== CALENDAR POPUP (UPDATED STYLES) ===== */
      .calendar-popup {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(5px);
        justify-content: center;
        align-items: center;
      }

      .calendar-box {
        background: var(--card-bg-color); /* Mapped to existing var */
        color: var(--text-color);
        border-radius: 15px;
        width: 90%;
        max-width: 400px; /* Kept from previous structure for better responsiveness */
        box-shadow: 0 4px 15px var(--shadow-color); /* Mapped to existing var */
        overflow: hidden;
        animation: fadeIn 0.3s ease;
      }

      .calendar-header {
        background: var(--calendar-header);
        color: white;
        text-align: center;
        padding: 12px;
        font-size: 20px;
        position: relative;
      }

      .close-btn {
        position: absolute;
        top: 10px;
        right: 15px;
        background: var(--calendar-header);
        color: white;
        border: none;
        font-size: 18px;
        border-radius: 50%;
        cursor: pointer;
        padding: 2px 8px; /* Added padding to make it a circle */
      }

      .close-btn:hover {
        background: darkred;
      }

      .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 5px;
        padding: 10px;
      }

      .day-name {
        background: var(--calendar-dayname-bg);
        padding: 5px;
        border-radius: 5px;
        text-align: center;
        font-weight: bold;
      }

      .day {
        background: var(--calendar-day-bg);
        border: 1px solid var(--calendar-border);
        border-radius: 5px;
        text-align: center;
        padding: 10px 0; /* Adjusted vertical padding */
        cursor: default; /* Changed from pointer to default for non-events */
        transition: 0.3s;
      }

      .day:hover {
        background: var(
          --calendar-dayname-bg
        ); /* Use day name bg for hover effect */
      }

      .day.event {
        background: crimson;
        color: white;
        font-weight: bold;
        cursor: pointer;
        border-color: crimson; /* Match border color */
      }

      .day.event:hover {
        background: #c41e3a; /* Darker crimson on event hover */
        transform: scale(1.05); /* Added subtle scale */
      }

      .event-info {
        padding: 15px;
        text-align: center;
        color: var(--text-color);
        border-top: 1px solid var(--calendar-border);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* ===== CONTACT FORM STYLES (Existing) ===== */
      .contact-section {
        text-align: center;
        padding: 50px 20px;
        background-color: var(--card-bg-color);
        color: var(--text-color);
        box-shadow: 0 4px 20px var(--shadow-color);
        margin: 40px auto;
        max-width: 700px;
        border-radius: 10px;
      }

      .contact-section h2 {
        font-size: 2em;
        margin-bottom: 25px;
        color: var(--text-color);
      }

      #contactForm {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .form-group {
        position: relative;
        text-align: left;
      }

      label {
        display: block;
        font-weight: bold;
        margin-bottom: 6px;
        color: var(--text-color);
      }

      input,
      textarea {
        width: 100%;
        padding: 10px 35px 10px 10px;
        border: 2px solid #ccc;
        border-radius: 6px;
        font-size: 1em;
        background-color: var(--bg-color);
        color: var(--text-color);
        transition: border-color 0.3s ease;
        box-sizing: border-box;
        resize: vertical;
        min-height: 44px;
      }

      textarea {
        min-height: 80px;
        max-height: 200px;
      }

      input:focus,
      textarea:focus {
        border-color: crimson;
        outline: none;
      }

      .error-message {
        display: block;
        color: #e74c3c;
        font-size: 0.9em;
        margin-top: 4px;
        min-height: 18px;
      }

      /* .valid-icon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%); 
            color: green;
            display: none;
            font-weight: bold;
        } */

      .form-group:last-of-type .valid-icon {
        top: 15px;
        transform: translateY(0);
      }

      input.valid,
      textarea.valid {
        border-color: green;
      }

      input.invalid,
      textarea.invalid {
        border-color: #e74c3c;
      }

      input.valid + .error-message + .valid-icon,
      textarea.valid + .error-message + .valid-icon {
        display: inline;
      }

      #submitBtn {
        padding: 12px;
        background-color: crimson;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      #submitBtn:disabled {
        background-color: #888;
        cursor: not-allowed;
      }

      #submitBtn:not(:disabled):hover {
        background-color: #c41e3a;
      }

      /* --- Footer Styles (Existing) --- */
      .footer {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
        padding: 20px;
        background: var(--navbar-bg);
        color: white;
        font-family: Calibri, sans-serif;
        text-align: center;
      }

      .footer p {
        font-size: 16px;
        margin: 0;
      }

      .footer-social-links {
        display: flex;
        justify-content: center;
        gap: 20px;
      }

      .social-icon {
        fill: #fff;
        width: 24px;
        height: 24px;
        transition: fill 0.3s ease;
      }

      .footer-social-links a:hover .social-icon {
        fill: #ddd;
      }
    </style>
  </head>
  <body>
    <input type="checkbox" id="theme-toggle" />

    <div class="page-wrapper" id="home">
      <nav class="navbar">
        <div class="navdiv">
          <div class="logo">
            <img src="images/Logo.jpg" alt="Event Sphere Logo" />
          </div>
          <input type="checkbox" id="menu-toggle" />
          <label for="menu-toggle" class="menu-icon">☰</label>
          <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li>
              <label for="theme-toggle" class="mode-btn">Dark Mode</label>
            </li>
            <li><a href="#cal" id="calendarBtn">Calendar</a></li>
            <li><a href="#contact">Contact us</a></li>
          </ul>
        </div>
      </nav>

      <div class="banner_section">
        <div class="slider">
          <div class="slides" id="slides">
            <div class="slide">
              <img src="images/Banner 1.jpg" alt="Slide 1" />
            </div>
            <div class="slide">
              <img src="images/Banner 2.jpg" alt="Slide 2" />
            </div>
            <div class="slide">
              <img src="images/Banner 3.jpg" alt="Slide 3" />
            </div>
            <div class="slide">
              <img src="images/Banner 4.jpg" alt="Slide 4" />
            </div>
          </div>
          <button class="nav-btn" id="prevBtn">&#10094;</button>
          <button class="nav-btn" id="nextBtn">&#10095;</button>
          <div class="dots">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
          </div>
        </div>
      </div>

      <div class="top-categories-wrapper p-4 md:p-8 font-sans" id="about">
        <main class="max-w-7xl mx-auto">
          <section
            class="mb-8 p-4 rounded-xl shadow-lg filter-section-tailwind"
          >
            <div
              class="flex flex-col sm:flex-row items-center justify-center space-y-3 sm:space-y-0 sm:space-x-4"
            >
              <label
                for="categoryFilter"
                class="text-lg font-medium text-gray-700"
                >Filter Categories:</label
              >
              <select
                id="categoryFilter"
                class="p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 text-base"
              >
                <option value="all">All</option>
                <option value="favorites">⭐ My Favorites</option>
                <option value="sports">Sports</option>
                <option value="comedy">Comedy</option>
                <option value="theatre">Theatre</option>
                <option value="movies">Movies</option>
                <option value="concerts">Concerts</option>
              </select>
            </div>
          </section>

          <section class="top-categories p-6 md:p-10 rounded-xl shadow-2xl">
            <h2 class="text-3xl font-extrabold mb-6 flex items-center">
              <span class="mr-2">🎯</span> Top Categories
            </h2>

            <div
              id="category-container"
              class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6"
            >
              <div
                class="category-card relative rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-1 group cursor-pointer"
                data-category="sports"
              >
                <img
                  class="w-full h-40 object-cover"
                  src="https://placehold.co/400x300/87CEEB/ffffff?text=Sports"
                  alt="Sports"
                />
                <div
                  class="category-label p-3 text-center font-semibold text-white bg-blue-600 group-hover:bg-blue-700 transition duration-300"
                >
                  ⚽ Sports
                </div>
                <span class="fav-icon transition duration-300 ease-in-out"
                  >♡</span
                >
              </div>

              <div
                class="category-card relative rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-1 group cursor-pointer"
                data-category="comedy"
              >
                <img
                  class="w-full h-40 object-cover"
                  src="https://placehold.co/400x300/FFA07A/ffffff?text=Comedy"
                  alt="Comedy"
                />
                <div
                  class="category-label p-3 text-center font-semibold text-white bg-orange-500 group-hover:bg-orange-600 transition duration-300"
                >
                  😂 Comedy
                </div>
                <span class="fav-icon transition duration-300 ease-in-out"
                  >♡</span
                >
              </div>

              <div
                class="category-card relative rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-1 group cursor-pointer"
                data-category="theatre"
              >
                <img
                  class="w-full h-40 object-cover"
                  src="https://placehold.co/400x300/90EE90/ffffff?text=Theatre"
                  alt="Theatre"
                />
                <div
                  class="category-label p-3 text-center font-semibold text-white bg-green-500 group-hover:bg-green-600 transition duration-300"
                >
                  🎭 Theatre
                </div>
                <span class="fav-icon transition duration-300 ease-in-out"
                  >♡</span
                >
              </div>

              <div
                class="category-card relative rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-1 group cursor-pointer"
                data-category="movies"
              >
                <img
                  class="w-full h-40 object-cover"
                  src="https://placehold.co/400x300/FF69B4/ffffff?text=Movies"
                  alt="Movies"
                />
                <div
                  class="category-label p-3 text-center font-semibold text-white bg-pink-500 group-hover:bg-pink-600 transition duration-300"
                >
                  🎬 Movies
                </div>
                <span class="fav-icon transition duration-300 ease-in-out"
                  >♡</span
                >
              </div>

              <div
                class="category-card relative rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-1 group cursor-pointer"
                data-category="concerts"
              >
                <img
                  class="w-full h-40 object-cover"
                  src="https://placehold.co/400x300/8A2BE2/ffffff?text=Concerts"
                  alt="Concerts"
                />
                <div
                  class="category-label p-3 text-center font-semibold text-white bg-purple-600 group-hover:bg-purple-700 transition duration-300"
                >
                  🎵 Concerts
                </div>
                <span class="fav-icon transition duration-300 ease-in-out"
                  >♡</span
                >
              </div>
            </div>
          </section>
        </main>
      </div>

      <div class="calendar-popup" id="calendarPopup">
        <div class="calendar-box">
          <div class="calendar-header">
            October 2025
            <button class="close-btn" id="closeCal">×</button>
          </div>
          <div class="calendar-grid" id="calendarDays"></div>
          <div class="event-info" id="eventInfo">
            Click an event date to see details.
          </div>
        </div>
      </div>

      <section class="contact-section" id="contact">
        <h2>📩 Contact us</h2>
        <form id="contactForm" novalidate>
          <div class="form-group">
            <label for="name">Full Name:</label>
            <input
              type="text"
              id="name"
              name="name"
              placeholder="Enter your name"
            />
            <span class="error-message"></span>
          </div>
          <div class="form-group">
            <label for="email">Email Address:</label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="Enter your email"
            />
            <span class="error-message"></span>
          </div>
          <div class="form-group">
            <label for="message">Your Message:</label>
            <textarea
              id="message"
              name="message"
              placeholder="Write your message..."
            ></textarea>
            <span class="error-message"></span>
          </div>
          <button type="submit" id="submitBtn" disabled>Send Message</button>
          <p
            id="successMessage"
            style="
              color: green;
              font-weight: bold;
              display: none;
              margin-top: 10px;
            "
          >
            ✅ Message sent successfully!
          </p>
        </form>
      </section>

      <footer class="footer">
        <p>Powered by Chitkara University</p>
        <div class="footer-social-links">
          <a
            href="https://www.linkedin.com/school/chitkara-university/"
            target="_blank"
          >
            <svg
              class="social-icon"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 448 512"
            >
              <path
                d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.8 53.8 0 11107.59 0c0 29.7-24.09 54.3-53.8 54.3zM447.9 448h-92.4V302.4c0-34.7-.7-79.2-48.3-79.2-48.3 0-55.7 37.7-55.7 76.6V448h-92.5V148.9h88.8v40.8h1.3c12.4-23.4 42.5-48.3 87.4-48.3 93.6 0 110.9 61.6 110.9 141.7V448z"
              />
            </svg>
          </a>
          <a href="https://www.instagram.com/chitkarau/" target="_blank">
            <svg
              class="social-icon"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 448 512"
            >
              <path
                d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9S160.5 370.8 224.1 370.8c63.6 0 114.9-51.3 114.9-114.9S287.7 141 224.1 141zm0 188.2c-40.5 0-73.4-32.9-73.4-73.4s32.9-73.4 73.4-73.4 73.4 32.9 73.4 73.4-32.9 73.4-73.4 73.4zm146.4-194.3c0 14.9-12.1 27-27 27s-27-12.1-27-27 12.1-27 27-27 27 12.1 27 27zM398.8 80c-8.4-21.3-24.9-37.8-46.2-46.2C325.3 24 256 24 256 24s-69.3 0-96.6 9.8c-21.3 8.4-37.8 24.9-46.2 46.2C104 107.3 104 176.6 104 176.6s0 69.3 9.8 96.6c8.4 21.3 24.9 37.8 46.2 46.2C186.7 329 256 329 256 329s69.3 0 96.6-9.8c21.3-8.4 37.8-24.9 46.2-46.2 9.8-27.3 9.8-96.6 9.8-96.6s0-69.3-9.8-96.6z"
              />
            </svg>
          </a>
          <a href="https://twitter.com/ChitkaraU" target="_blank">
            <svg
              class="social-icon"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
            >
              <path
                d="M459.4 151.7c.3 4.5 .3 9 .3 13.6 0 138.7-105.6 298.9-298.9 298.9-59.5 0-114.9-17.2-161.5-47 8.4 1 16.8 1.6 25.7 1.6 49.1 0 94.2-16.8 130.1-45.5-46-1-84.8-31.1-98.1-72.8a106.3 106.3 0 0047.7-1.6c-48.1-9.7-84.2-52-84.2-102.6v-1.3c14.1 7.8 30.2 12.6 47.4 13.2a104.9 104.9 0 01-46.6-87.5c0-19.5 5.2-37.5 14.1-53a298.6 298.6 0 00216.5 109.8c-15.9-76.1 41.4-137.7 112.5-137.7 33 0 62.8 13.8 83.7 36.3a208 208 0 0065.8-25.2c-6.8 21.3-21.3 39.1-40.4 50.5a211 211 0 0060.5-16.1c-13.2 20.4-30.1 38.4-49.5 52.6z"
              />
            </svg>
          </a>
          <a href="https://www.facebook.com/ChitkaraU/" target="_blank">
            <svg
              class="social-icon"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 320 512"
            >
              <path
                d="M279.1 288l14.2-92.7h-88.9v-60.1c0-25.4 12.4-50.1 52.2-50.1H296V6.3S273.7 0 252.1 0c-73.5 0-121.6 44.4-121.6 124.7v70.6H64v92.7h66.5V512h100.2V288z"
              />
            </svg>
          </a>
        </div>
        <p>&copy; 2025 Chitkara University. All rights reserved.</p>
      </footer>
    </div>

    <script>
      // ===== New Image Slider Functionality (Existing Code) =====
      const slidesContainer = document.getElementById("slides");
      const dots = document.querySelectorAll(".dot");
      let slides = slidesContainer.children;
      const totalSlides = slides.length;
      let slideIndex = 1;
      let autoSlideInterval;
      let isTransitioning = false;

      // Clone the first and last slides for infinite looping
      const firstClone = slides[0].cloneNode(true);
      const lastClone = slides[totalSlides - 1].cloneNode(true);
      slidesContainer.appendChild(firstClone);
      slidesContainer.insertBefore(lastClone, slides[0]);

      slides = slidesContainer.children;
      const slideCount = slides.length;

      slidesContainer.style.transform = `translateX(-${slideIndex * 100}%)`;

      function updateDots() {
        dots.forEach((dot, idx) => {
          const currentSlide = (slideIndex - 1 + totalSlides) % totalSlides;
          dot.classList.toggle("active-dot", idx === currentSlide);
        });
      }

      function goToSlide(idx, withTransition = true) {
        slidesContainer.style.transition = withTransition
          ? "transform 1.4s cubic-bezier(0.77, 0, 0.175, 1)"
          : "none";
        slidesContainer.style.transform = `translateX(-${idx * 100}%)`;

        if (withTransition) {
          updateDots();
        }
      }

      function nextSlide() {
        if (isTransitioning) return;
        isTransitioning = true;
        slideIndex++;
        goToSlide(slideIndex, true);
      }

      function prevSlide() {
        if (isTransitioning) return;
        isTransitioning = true;
        slideIndex--;
        goToSlide(slideIndex, true);
      }

      // Dot navigation
      dots.forEach((dot, idx) => {
        dot.onclick = () => {
          slideIndex = idx + 1;
          goToSlide(slideIndex, true);
          restartAutoSlide();
        };
      });

      slidesContainer.addEventListener("transitionend", () => {
        if (slideIndex === slideCount - 1) {
          slideIndex = 1;
          goToSlide(slideIndex, false);
        }
        if (slideIndex === 0) {
          slideIndex = slideCount - 2;
          goToSlide(slideIndex, false);
        }
        isTransitioning = false;
        updateDots();
      });

      // Button navigation
      document.getElementById("nextBtn").onclick = () => {
        nextSlide();
        restartAutoSlide();
      };
      document.getElementById("prevBtn").onclick = () => {
        prevSlide();
        restartAutoSlide();
      };

      function autoSlide() {
        autoSlideInterval = setInterval(() => {
          nextSlide();
        }, 3000); // Slide every 3 seconds
      }

      function restartAutoSlide() {
        clearInterval(autoSlideInterval);
        autoSlide();
      }

      goToSlide(slideIndex, false);
      updateDots();
      autoSlide();
      // ===== End New Image Slider Functionality =====

      // ===== Contact Form Validation (Existing Code) =====
      const nameInput = document.getElementById("name");
      const emailInput = document.getElementById("email");
      const messageInput = document.getElementById("message");
      const submitBtn = document.getElementById("submitBtn");
      const form = document.getElementById("contactForm");
      const successMsg = document.getElementById("successMessage");

      function validate() {
        let valid = true;
        const fields = [
          {
            input: nameInput,
            minLength: 3,
            errorMessage: "Name must be at least 3 characters",
          },
          {
            input: emailInput,
            pattern: /\S+@\S+\.\S+/,
            errorMessage: "Enter a valid email",
          },
          {
            input: messageInput,
            minLength: 10,
            errorMessage: "Message must be at least 10 characters",
          },
        ];

        fields.forEach((field) => {
          const { input, minLength, pattern, errorMessage } = field;
          let isValid = true;

          if (pattern) {
            isValid = pattern.test(input.value);
          } else if (minLength) {
            isValid = input.value.trim().length >= minLength;
          }

          if (isValid) {
            input.classList.add("valid");
            input.classList.remove("invalid");
            input.nextElementSibling.textContent = "";
          } else {
            input.classList.add("invalid");
            input.classList.remove("valid");
            input.nextElementSibling.textContent = errorMessage;
            valid = false;
          }
        });

        submitBtn.disabled = !valid;
      }

      [nameInput, emailInput, messageInput].forEach((input) =>
        input.addEventListener("input", validate)
      );

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        successMsg.style.display = "block";
        form.reset();
        [nameInput, emailInput, messageInput].forEach((i) => {
          i.classList.remove("valid");
          i.classList.remove("invalid");
          i.nextElementSibling.textContent = "";
        });
        submitBtn.disabled = true;
        setTimeout(() => {
          successMsg.style.display = "none";
        }, 5000);
      });

      // ===== Calendar Popup Functionality (UPDATED CODE) =====
      const popup = document.getElementById("calendarPopup");
      const btn = document.getElementById("calendarBtn");
      const closeBtn = document.getElementById("closeCal");
      const grid = document.getElementById("calendarDays");
      const info = document.getElementById("eventInfo");

      // Event handler mapping
      btn.onclick = (e) => {
        e.preventDefault();
        popup.style.display = "flex";
      };
      closeBtn.onclick = () => (popup.style.display = "none");
      window.onclick = (e) => {
        if (e.target === popup) popup.style.display = "none";
      };

      // Event data (New data provided in the prompt)
      const events = {
        5: "Tech Fest Opening 🎉",
        6: "Sports Meet ⚽",
        8: "Comedy Night 😂",
        11: "Theatre Play 🎭",
        16: "Movie Marathon 🎬",
        21: "Workshop Day 💡",
        29: "Smart India Hackathon 🏆",
        31: "Cultural Fest 🌟",
      };

      // Create calendar
      const daysInMonth = 31;
      const startDay = 3; // Oct 2025 starts on Wednesday (0=Sun, 1=Mon, ..., 3=Wed)
      const names = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
      grid.innerHTML = names
        .map((d) => `<div class="day-name">${d}</div>`)
        .join("");

      for (let i = 0; i < startDay; i++)
        grid.innerHTML += `<div class="day"></div>`;
      for (let d = 1; d <= daysInMonth; d++) {
        const eventDay = events[d] ? "event" : "";
        grid.innerHTML += `<div class="day ${eventDay}" data-day="${d}">${d}</div>`;
      }

      grid.querySelectorAll(".day.event").forEach((day) => {
        day.onclick = () => {
          const date = day.dataset.day;
          info.textContent = `📅 October ${date}: ${events[date]}`;
        };
      });

      // ===== New Category Filtering and Favoriting Logic (From the new code block) =====

      const favIcons = document.querySelectorAll(".fav-icon");
      const categoryCards = document.querySelectorAll(".category-card");
      const categoryFilter = document.getElementById("categoryFilter");

      // Initialize favorites from local storage
      let favorites = JSON.parse(localStorage.getItem("favorites")) || [];

      // --- Filtering Logic ---

      const applyFilter = () => {
        const selectedCategory = categoryFilter.value;

        categoryCards.forEach((card) => {
          const cardCategory = card.dataset.category;
          const isFavorite = favorites.includes(cardCategory);

          let shouldShow = false;

          if (selectedCategory === "all") {
            shouldShow = true;
          } else if (selectedCategory === "favorites") {
            shouldShow = isFavorite;
          } else if (selectedCategory === cardCategory) {
            shouldShow = true;
          }

          // Use 'block' as per the Tailwind-based HTML to maintain grid flow when showing
          card.style.display = shouldShow ? "block" : "none";
        });
      };

      categoryFilter.addEventListener("change", applyFilter);

      // --- Favoriting Logic ---

      const saveFavorites = () => {
        try {
          localStorage.setItem("favorites", JSON.stringify(favorites));
          // Re-apply filter if the user is currently viewing 'favorites'
          if (categoryFilter.value === "favorites") {
            applyFilter();
          }
        } catch (e) {
          console.error("Could not save to localStorage:", e);
        }
      };

      favIcons.forEach((icon) => {
        const categoryCard = icon.closest(".category-card");
        if (!categoryCard) return;

        const category = categoryCard.dataset.category;

        // 1. Initial State Check
        if (favorites.includes(category)) {
          icon.classList.add("active");
          icon.textContent = "♥"; // Filled heart
        } else {
          icon.textContent = "♡"; // Empty heart
        }

        // 2. Click Event Listener
        icon.addEventListener("click", (event) => {
          event.stopPropagation();

          icon.classList.toggle("active");
          const isActive = icon.classList.contains("active");

          // Toggle heart display
          icon.textContent = isActive ? "♥" : "♡";

          // Update the global favorites array
          if (isActive) {
            if (!favorites.includes(category)) {
              favorites.push(category);
            }
          } else {
            favorites = favorites.filter((fav) => fav !== category);
          }

          // Save and potentially re-filter
          saveFavorites();
        });
      });

      // Apply filter on initial load
      applyFilter();

      console.log("Current Favorites loaded:", favorites);
    </script>
  </body>
</html>
